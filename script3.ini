[script]
n0=on *:input:status window:{ if /* iswm $1 { return } | .timer 1 0 echo -s $1- | haltdef }
n1=on *:text:*:?:{
n2=  if $nick !ison %chan { return }
n3=  if $nick !isop %chan && @* iswm $strip($1) {
n4=    inc %p.tf.a. [ $+ [ $nick ] ]
n5=    if %p.tf.a. [ $+ [ $nick ] ] >= 3 { kick %chan $nick Floodou? Floodeu-se! (PVT) | .timerp.tf. $+ $nick off | unset %p.*. [ $+ [ $nick ] ] | return }
n6=    if $timer(p.tf. $+ $nick) == $null { .timerp.tf. $+ $nick 1 5 unset %p.tf.a. [ $+ [ $nick ] ] }
n7=  }
n8=  if $nick !isop %chan && @* iswm $strip($1) {
n9=    if $strip($1) == %p.rf.a. [ $+ [ $nick ] ] { inc %p.rf.b. [ $+ [ $nick ] ] }
n10=    else unset %p.rf.b. [ $+ [ $nick ] ]
n11=    set %p.rf.a. [ $+ [ $nick ] ] $strip($1)
n12=    if $calc(%p.rf.b. [ $+ [ $nick ] ] + 1) >= 2 { kick %chan $nick Não repita os comandos. (PVT) | .timerp.rf?. $+ $nick off | unset %p.*. [ $+ [ $nick ] ] | return }
n13=    if $timer(p.rf. $+ $nick) == $null { .timerp.rf. $+ $nick 1 5 unset %p.rf.b. [ $+ [ $nick ] ] | .timerp.rf2. $+ $nick 1 5 unset %p.rf.a. [ $+ [ $nick ] ] }
n14=  }
n15=  if $strip($1-) == @cadastrar {
n16=    if guest* iswm $nick || brasirc* iswm $nick { notice $nick Troque de nick, não são aceitos guests. | return }
n17=    ;if *away* iswm $nick || *auei* iswm $nick { notice $nick Troque de nick, não são aceitos nicks de away. | return }
n18=    if $getinfo(pokes,$nick) { notice $nick Você já está cadastrado! | return }
n19=    if $gettemp(cadastrando,$nick) { notice $nick Você está dentro do tempo dado, por favor diga seus pokémons no meu PVT. | return }
n20=    .msg $nick $pkbr $cor(3) $+ Diga-me $cor(1) $+ 3 $cor(3) $+ pokémons, $cor(1) $+ level $cor(3) $+ 25. $cor(3) $+ Proibidos: $cor(1) $+ Mew $+ $cor(3) $+ , $cor(1) $+ Mewtwo $+ $cor(3) $+ , $cor(1) $+ 'Stone'ados $+ $cor(3) $+ , entre $cor(1) $+ 152 $cor(3) $+ e $cor(1) $+ 251 $+ $cor(3) $+ , $cor(1) $+ que evoluem com trocas $+ $cor(3) $+ , e $cor(1) $+ que evoluem depois do level 25.
n21=    .msg $nick $pkbr $cor(3) $+ Diga apenas o nome dos pokémons, $cor(1) $+ em linhas separadas. $cor(3) $+ Tempo-limite de $cor(1) $+ 5 $cor(3) $+ minutos
n22=    settemp cadastrando $nick $true
n23=    .timer $+ $nick 1 300 check $sc($nick)
n24=  }
n25=  if $gettemp(cadastrando,$nick) == $true {
n26=    if $istok($gettemp(pokes,$nick),$strip($1-),32) == $true { msg $nick $pkbr $cor(1) $+ $strip($1-) $cor(3) $+ já existente em sua lista, por favor escolha outro. | return }
n27=    if $ehpoke($strip($1-)) { settemp pokes $nick $gettemp(pokes,$nick) $replace($strip($1-),$chr(32),$chr(160)) | msg $nick $pkbr $cor(3) $+ Pokémon $cor(1) $+ $strip($1-) $cor(3) $+ detectado. }
n28=    elseif $gettemp(pass,$nick) == $null && $strip($1) != @cadastrar { msg $nick $pkbr $cor(1) $+ $strip($1-) $+ ? $cor(3) $+ Por favor, releia o que foi dito. }
n29=    if $gettok($gettemp(pokes,$nick),0,32) == 3 && $gettemp(pass,$nick) == $null { msg $nick $pkbr $cor(3) $+ Escolha uma senha para identificar-se posteriormente - $cor(1) $+ Use /say antes da senha. | settemp pass $nick _T0_S3t_ | goto a }
n30=    if $gettok($gettemp(pokes,$nick),0,32) == 3 && $gettemp(pass,$nick) === _T0_S3t_ { settemp pass $nick $1 | msg $nick $pkbr $cor(3) $+ Senha gravada. ( $+ $cor(1) $+ $strip($1) $+ $cor(3) $+ ) | xidentify $nick }
n31=    if $gettok($gettemp(pokes,$nick),0,32) == 3 && $gettemp(pass,$nick) { msg $nick $pkbr $cor(3) $+ Você está cadastrado, agora pode participar das batalhas do $cor(1) $+ $remove(%chan,$chr(35)) $+ $cor(3) $+ . | setinfo pokes $sc($nick) $xxbah($gettemp(pokes,$nick)) | setinfo levels $sc($nick) 25 25 25 | setinfo grana $sc($nick) 300 | setinfo tms $sc($nick) no no no | setinfo hms $sc($nick) no no no | setinfo itens $nick noitens | setpass $nick $gettemp(pass,$nick) | deltemp pass $sc($nick) | deltemp pokes $sc($nick) | deltemp cadastrando $sc($nick) | msg %chan $pkbr $cor(3) $+ Novo cadastrado $x $cor(3) $+ $nick | msg %chan $pkbr $cor(3) $+ Número de cadastrados $x $cor(3) $+ $ini(info.ini,pokes,0) | .timer $+ $nick off | .dcc send $nick ajuda.txt }
n32=    :a
n33=  }
n34=  if $strip($1) == @identify || $strip($1) == @id { if $getpass($nick) && $nick ison %chan && $xidentified($nick) == $false { if $getpass($nick) == $strip($2) { msg $nick $pkbr $cor(3) $+ Senha aceita, bem vindo ao $cor(1) $+ $remove(%chan,$chr(35)) $+ . | xidentify $nick } | else { msg $nick $cor(3) $+ Senha incorreta. } } }
n35=  if $strip($1) == @pass && $getinfo(pokes,$nick) && $getpass($nick) == $null { xxpass $nick $strip($2) }
n36=  if $strip($1) == @pass && $getinfo(pokes,$nick) && $getpass($nick) && $xidentified($nick) { xxpass $nick $strip($2) }
n37=  if $strip($1) == @memo && $xidentified($nick) {
n38=    if $strip($2-) == list { listmemo $nick }
n39=    if $strip($2) == del && $3 { delmemo $nick $3 }
n40=    if $strip($2) == read && $3 { readmemo $nick $3 }
n41=    if $strip($2) == send && $3 && $4 { sendmemo $nick $3 $4- }
n42=  }
n43=  if $strip($1) == @aceitar {
n44=    if $numtok(%fight.fila,32) >= 20 { notice $nick Fila cheia. | return }
n45=    if $numtok($getinfo(pokes,$nick),32) < $strip($3) { msg $nick Você tem $numtok($getinfo(pokes,$nick),32) pokémons. | return }
n46=    if $strip($3) == $null { msg $nick Sintaxe: @Aceitar [Nick] [ID do seu pokémon] | return }
n47=    if $strip($3) !isnum { msg $nick What? $strip($3) não é um número :P. | return }
n48=    if $strip($2) !ison %chan { msg $nick $strip($2) não está no %chan $+ . | return }
n49=    var %nick1 $nick
n50=    var %poke1 %xpoke. [ $+ [ %nick1 ] ]
n51=    var %level1 $gettok($getinfo(levels, [ %nick1 ] ), [ %poke1 ] ,32)
n52=    var %num1 $ini(pokedex.ini,golpes,$gettok($getinfo(pokes, [ %nick1 ] ), [ %poke1 ] ,32))
n53=    if %num1 > 151 { msg $nick Por enquanto, ainda não aceito pokémons novos. Para trocar, fale com blast | return }
n54=    if %desafio. [ $+ [ $nick ] ] == $strip($2) {
n55=      if $istok(%fight.fila,$strip($2),32) { msg $nick Oh-oh.. $strip($2) acabou de entrar na fila, e não pode ficar duas vezes na fila. | return }
n56=      set %fight.fila %fight.fila %desafio. [ $+ [ $nick ] ] $nick | msg %desafio. [ $+ [ $nick ] ] $nick aceitou seu desafio, ele usará um $gettok($getinfo(pokes,$nick),$strip($3),32) LVL $gettok($getinfo(levels,$nick),$strip($3),32) $+ . | .timer1 $+ $nick off | unset %desafio. [ $+ [ $nick ] ] | msg $nick Desafio aceito. | set %xpoke. [ $+ [ $nick ] ] $strip($3)
n57=      fila
n58=      if %sbp.player1 == $null && $timer(luta) == $null {
n59=        iniciar luta
n60=      }
n61=    }
n62=    else notice $nick Você não foi desafiado por $strip($2) $+ .
n63=  }
n64=  if $strip($1) == @rejeitar && $2 {
n65=    if %desafio. [ $+ [ $nick ] ] == $strip($2) { msg %desafio. [ $+ [ $nick ] ] $nick rejeitou seu desafio. $iif($strip($3),Motivo: $strip($3-)) | .timer1 $+ $nick off | unset %xpoke. [ $+ [ $nick ] ] | unset %desafio. [ $+ [ $nick ] ] | msg $nick Desafio rejeitado. }
n66=    else notice $nick Você não foi desafiado por $strip($2) $+ .
n67=  }
n68=}
n69=
n70=alias xxpass { if $getpass($1) == $null { msg $1 Senha gravada ( $+ $strip($2) $+ ). | xidentify $1 } | else { msg $1 Senha alterada de $getpass($1) para $strip($2) } | setpass $1 $strip($2) }
n71=alias cpass { var %a $getpass($1) | var %b $2 | if %a == $b { return $true } | else return $false }
n72=
n73=alias num { return $ini(pokedex.ini,golpes,$1) }
n74=alias evo { return $readini(pokedex.ini,evolui,$1) }
n75=
n76=alias msg { .msg $1 $remove($2-,$chr(35)) | if $window(@msgs) == $null window -nk0 @MSGs | if $window($1) { echo -t $1 < $+ $me $+ > $2- } | else echo -t @msgs -> * $+ $1 $+ * $2- }
n77=alias notice { .notice $1- | if $window(@msgs) == $null window -nk0 @MSGs | if $window($1) { echo -t $1 - $+ $me $+ - $2- } | else echo -t @msgs -> - $+ $1 $+ - $2- }
n78=
n79=alias comvirgula { var %a 0 | while %a < $numtok($1-,32) { inc %a | if %a == $numtok($1-,32) && $numtok($1-,32) != 1 { var %b %b e $gettok($1-, [ %a ] ,32) } | else { var %b %b $+ $iif(%a != 1,$chr(44)) $gettok($1-, [ %a ] ,32) } } | return %b }
n80=alias olah { var %a 0 | while %a < $nick( [ %chan ] ,0) { inc %a | var %b %b $nick( [ %chan ] , [ %a ] ) } | msg %chan Ae $convirgula(%b) $+ ! }
n81=
n82=alias diskete {
n83=  remove a:\script.ini
n84=  copy script.ini a:\
n85=  remove a:\pass.ini
n86=  copy pass.ini a:\
n87=  remove a:\aliases.ini
n88=  copy aliases.ini a:\
n89=  remove a:\ops.ini
n90=  copy ops.ini a:\
n91=  remove a:\temp.ini
n92=  copy temp.ini a:\
n93=  remove a:\pokedex.ini
n94=  copy pokedex.ini a:\
n95=  remove a:\ataques.ini
n96=  copy ataques.ini a:\
n97=  remove a:\pass.ini
n98=  copy pass.ini a:\
n99=  remove a:\sbp1.mrc
n100=  copy sbp\sbp1.mrc a:\
n101=  remove a:\sbp2.mrc
n102=  copy sbp\sbp2.mrc a:\
n103=  remove a:\sbp3.mrc
n104=  copy sbp\sbp3.mrc a:\
n105=  remove a:\sbp4.mrc
n106=  copy sbp\sbp4.mrc a:\
n107=}
n108=alias diskete2 {
n109=  remove script.ini
n110=  copy a:\script.ini $mircdir
n111=  remove pass.ini
n112=  copy a:\pass.ini $mircdir
n113=  remove aliases.ini
n114=  copy a:\aliases.ini $mircdir
n115=  remove ops.ini
n116=  copy a:\ops.ini $mircdir
n117=  remove temp.ini
n118=  copy a:\temp.ini $mircdir
n119=  remove pokedex.ini
n120=  copy a:\pokedex.ini $mircdir
n121=  remove ataques.ini
n122=  copy a:\ataques.ini $mircdir
n123=  remove pass.ini
n124=  copy a:\pass.ini $mircdir
n125=  remove sbp\sbp1.mrc
n126=  copy a:\sbp1.mrc sbp\
n127=  remove sbp\sbp2.mrc
n128=  copy a:\sbp2.mrc sbp\
n129=  remove sbp\sbp3.mrc
n130=  copy a:\sbp3.mrc sbp\
n131=  remove sbp\sbp4.mrc
n132=  copy a:\sbp4.mrc sbp\
n133=  echo reiniciando...
n134=  restart
n135=}
n136=on *:notice:*:?:{
n137=  if ($nick == NickServ) {
n138=    if *senha*aceita* iswm $1- { if $me ison %chan && $me !isop %chan { chanserv op %chan $me } }
n139=    if *digite*identify* iswm $1- { nickserv identify $decode(%pass) }
n140=    if *seu nick foi mudado* iswm $1- { nick %ame | .timer 1 3 identify $decode(%pass) | nickserv release %me $decode(%pass) }
n141=    if *derrubado*usado* iswm $1- { nick %me }
n142=  }
n143=}
n144=on *:join:*:{
n145=  if %chan == $chan {
n146=    if $nick(#,0) > %recorde { set %recorde $nick(#,0) | write records.txt %recorde - $asctime }
n147=    checksl $nick $fulladdress
n148=    if $nick == $me { set %modo fight | .timernews 0 300 novidades }
n149=    if $readini(ops.ini,pass,$nick) { unidentify $nick }
n150=    set %entrou.no.pkbr $addtok(%entrou.no.pkbr,$nick,46)
n151=    .timerentrou.pkbr 0 300 unset %entrou.no.pkbr
n152=    if $getpass($nick) == $null && $getinfo(pokes,$nick) { msg $nick $pkbr $cor(3) $+ Você não tem uma senha, por favor digite $cor(1) $+ @pass senha $cor(3) $+  nesta tela para setar uma. }
n153=    if $jaentrou($gettok($address($nick,2),2,64)) == $false { write entradas.txt $gettok($address($nick,2),2,64) }
n154=  }
n155=  if $chan == #maceio { part #maceio }
n156=}
n157=on *:op:%chan:{
n158=  if $opnick == $me && $online < 120 { var %a 0 | while %a < $nick(%chan,0,v) { inc %a | mode %chan -v $nick(%chan,%a,v) } | topic %chan $replace($chan(%chan).topic,Bot/OFF,Bot/ON) | mode %chan +nt }
n159=}
n160=on *:part:%chan:{ if $gettemp(cadastrando,$nick) { deltemp cadastrando $sc($nick) | deltemp pokes $sc($nick) | notice $nick Você saiu do $remove(%chan,$chr(35)) $+ , cadastro cancelado. } | if $getpass($nick) { xunidentify $nick } | if $nick == %sbp.player1 { sbp.fim Player2 } | if $nick == %sbp.player2 { sbp.fim Player1 } }
n161=on *:kick:%chan:{ if $gettemp(cadastrando,$knick) { deltemp cadastrando $sc($knick) | deltemp pokes $sc($knick) | notice $knick Você saiu do $remove(%chan,$chr(35)) $+ , cadastro cancelado. } | if $getpass($knick) { xunidentify $knick } | if $knick == %sbp.player1 { sbp.fim Player2 } | if $knick == %sbp.player2 { sbp.fim Player1 } }
n162=on *:quit:{ if $gettemp(cadastrando,$nick) { deltemp cadastrando $sc($nick) | deltemp pokes $sc($nick) | deltemp pass $sc($nick) } | if $getpass($nick) { xunidentify $nick } | if $nick == %sbp.player1 { sbp.fim Player2 } | if $nick == %sbp.player2 { sbp.fim Player1 } }
n163=on *:nick:{
n164=  if $gettemp(cadastrando,$nick) && $newnick ison %chan { deltemp cadastrando $sc($nick) | deltemp pokes $sc($nick) | notice $newnick Cadastro cancelado por mudança de nick. | .timer $+ $nick off } | if $getpass($nick) { xunidentify $nick | mode %chan -v $newnick }
n165=}
n166=
n167=alias xunidentify { remini pass.ini identify $1 | if $nick ison %chan { mode %chan -v $1 } }
n168=alias xidentify { writeini pass.ini identify $sc($1) x | checkmemo $1 | if $nick ison %chan { mode %chan +v $1 } }
n169=alias xidentified { if $readini(pass.ini,identify,$sc($1)) { return $true } | else return $false }
n170=
n171=alias checkmemo {
n172=  var %a 0 | var %b 0 | while %a < $lines(memos.txt) { inc %a | var %txt $read -l $+ %a memos.txt | if $gettok(%txt,1,199) == $1 { msg $1 Você tem memos - /msg $me @memo list para listar... | goto end } } | :end
n173=}
n174=alias listmemo {
n175=  var %a 0 | var %b 0 | while %a < $lines(memos.txt) { inc %a | var %txt $read -l $+ %a memos.txt | if $gettok(%txt,1,199) == $1 { inc %b | msg $1 Memo %b de $gettok(%txt,2,199) - Enviado dia $gettok(%txt,3,199) às $gettok(%txt,4,199) } } | msg $1 $iif(%b == 0,Nenhum memo,/msg $me @memo read número para ler...)
n176=}
n177=alias readmemo {
n178=  var %a 0 | var %b 0 | while %a < $lines(memos.txt) { inc %a | var %txt $read -l $+ %a memos.txt | if $gettok(%txt,1,199) == $1 { inc %b | if %b == $2 { msg $1 Memo %b / de $gettok(%txt,2,199) / Enviada no dia $gettok(%txt,3,199) às $gettok(%txt,4,199) × | msg $1 $gettok(%txt,5,199) } } } | msg $1 $iif(%b == 0,Você não tem memos - Impossível ler,/msg $me @memo del número para apagar.)
n179=}
n180=alias delmemo {
n181=  var %a 0 | var %b 0 | while %a < $lines(memos.txt) { inc %a | var %txt $read -l $+ %a memos.txt | if $gettok(%txt,1,199) == $1 { inc %b | if %b == $2 || $2 == all { write -dl $+ %a memos.txt | msg $1 Memo %b apagado. } } } | if %b == 0 { msg $1 Você não tem memos, impossível apagar }
n182=}
n183=alias sendmemo {
n184=  if $numtok($1-,199) == 1 { write memos.txt $2 $+ Ç $+ $1 $+ Ç $+ $date $+ Ç $+ $time(HH:nn) $+ Ç $+ $3- | msg $1 Memo enviado para $2 | if $2 ison %chan { notice $2 Você recebeu um memo de $1 } }
n185=}
n186=
n187=ctcp ^*:identify:?:{
n188=  if $readini(ops.ini,pass,$nick) && $2 === $decode($readini(ops.ini,pass,$nick),m) {
n189=    writeini ops.ini identify $nick x
n190=    .notice $nick Sua senha foi aceita, agora você tem acesso a mim.
n191=    mode %chan +o $nick
n192=    goto end
n193=  }
n194=  if $2 { .notice $nick Senha rejeitada }
n195=  else { .notice $nick Sintaxe: /CTCP $me IDENTIFY senha. }
n196=  :end
n197=  return
n198=}
n199=ctcp ^*:sound:{
n200=  .ignore -tu600 $address($nick,2)
n201=  if $me isop %chan { ban -u600 %chan $nick 2 | kick %chan $nick CTCP sound (TempBAN/10min) }
n202=  else msg %chan Pedido de BAN - Nick: $nick - Motivo: CTCP sound
n203=}
n204=ctcp ^*:ping:{
n205=  .ctcpreply $nick PING PONG!
n206=  haltdef
n207=}
n208=ctcp ^*:version:{
n209=  .ctcpreply $nick VERSION PkBR $versao
n210=  haltdef
n211=}
n212=ctcp ^*:time:{
n213=  .ctcpreply $nick TIME $time
n214=  haltdef
n215=}
n216=ctcp ^*:echo:{
n217=  .ctcpreply $nick ECHO Echo? BaH!
n218=  haltdef
n219=}
n220=ctcp ^*:userinfo:{
n221=  .ctcpreply $nick USERINFO Eu.. sou eu!
n222=  haltdef
n223=}
n224=ctcp ^*:clientinfo:{
n225=  .ctcpreply $nick CLIENTINFO PkBR version $versao
n226=  haltdef
n227=}
n228=ctcp *:new:{
n229=  if $identified($nick) {
n230=    if $2 == $null || $gettok($2-,0,255) == 1 { notice $nick Sintaxe: NEW TítuloÿMensagem | return }
n231=    write news.txt $nick $+ ÿ $+ $date $+ ÿ $+ $time(HH:nn) $+ ÿ $+ $+ $strip($2-)
n232=    notice $nick New postada!
n233=    unset %newsnicks
n234=  }
n235=  else notice $nick Acesso negado
n236=}
n237=ctcp *:addinfo:{ if $isadmin($nick) { setinfo $2 $3  $getinfo($2,$3) $4- | notice $nick Confirmação: OK } }
n238=ctcp *:repinfo:{
n239=  if $isadmin($nick) {
n240=    if $getinfo($2,$3) {
n241=      var %a 0
n242=      while %a < $gettok($getinfo($2,$3),0,32) {
n243=        inc %a
n244=        if %a == $4 {
n245=          var %b %b $5
n246=        }
n247=        else {
n248=          var %b %b $gettok($getinfo($2,$3), [ %a ] ,32)
n249=        }
n250=      }
n251=    }
n252=    setinfo $2 $3 %b
n253=    notice $nick Confirmação: OK
n254=  }
n255=  else { notice $nick Acesso negado }
n256=}
n257=
n258=ctcp *:delinfo:{
n259=  if $isadmin($nick) {
n260=    if $getinfo($2,$3) {
n261=      setinfo $2 $3 $deltok($getinfo($2,$3),$4,32)
n262=      notice $nick Confirmação: OK
n263=    }
n264=  }
n265=  else { notice $nick Acesso negado }
n266=}
n267=ctcp *:setinfo:{
n268=  if $isadmin($nick) {
n269=    if $getinfo(grana,$2) {
n270=      setinfo grana $2 $3
n271=      notice $nick Confirmação: OK
n272=    }
n273=  }
n274=  else { notice $nick Acesso negado }
n275=}
n276=alias denuncia { var %x 0 | while %x < $chan(0) { inc %x | if $1 ison $chan(%x) { msg $chan(%x) $2- } } }
n277=on *:exit:{
n278=  zerartmp
n279=  writeini popups.ini bpopup n0 P&kBR $versao
n280=}
n281=on *:start:{
n282=  xstart
n283=  .titlebar PkBR $versao by blast | .nick %me | .anick %ame | if $findfile($mircdir,dados_*,0) > 0 { run deldados.bat $versao } | echo -s the blast corporation | echo -s PkBR bot $versao
n284=}
n285=on *:disconnect:{ zerartmp }
n286=alias restart { run $mircexe | exit }
n287=alias zerartmp {
n288=  deltemp pokes
n289=  deltemp cadastrando
n290=  deltemp pass
n291=  deltemp jahadv
n292=  remini ops.ini identify
n293=  remini pass.ini identify
n294=  zerartudo
n295=  unset %fight.fila %cap.fila %xpoke.* %modo %cap.poke.* %entrou.no.pkbr %desafio.* %golpe %caps
n296=}
n297=on *:open:=:{
n298=  msg =$nick welcome to pkbr $versao
n299=  if $identified($nick) { msg =$nick entre com o comando.. | msgallchats $nick entrou no chat }
n300=  elseif $isop($nick) { msg =$nick identifique-se para ter acesso... | window -c =$nick }
n301=  else { msg =$nick voce nao tem permissao para continuar aqui | window -c =$nick }
n302=}
n303=on *:close:=:{ msgallchats $nick saiu do chat }
n304=alias versao return 7.6b4
n305=alias novidades {
n306=  msg %chan $pkbr $cor(1) $+ [ $+ %chan NEWS] $cor(3) $+ $read(novidades.txt)
n307=  if $timer(news) == $null { .timernews 0 300 novidades }
n308=}
n309=on *:chat:*:{
n310=  if $me isop %chan && $strip($1) == -o+v && ($identified($nick)) { var %1 0 | while %1 < $calc($0 - 1)) { inc %1 | var %a %a $ [ $+ [ $calc(%1 + 1)) ] ] $ [ $+ [ $calc(%1 + 1)) ] ] } | mode %chan $iif($2,$str(-o+v,$calc($0 - 1)),-o+v) $iif(%a,%a,$nick $nick) }
n311=  if $me isop %chan && $strip($1) == -v+o && ($identified($nick)) { var %1 0 | while %1 < $calc($0 - 1)) { inc %1 | var %a %a $ [ $+ [ $calc(%1 + 1)) ] ] $ [ $+ [ $calc(%1 + 1)) ] ] } | mode %chan $iif($2,$str(-v+o,$calc($0 - 1)),-v+o) $iif(%a,%a,$nick $nick) }
n312=  if $me isop %chan && $strip($1) == +o && ($identified($nick)) { mode %chan + $+ $iif($2,$str(o,$calc($0 - 1)),o) $iif($2,$2-,$nick) }
n313=  if $me isop %chan && $strip($1) == -o && ($identified($nick)) { mode %chan - $+ $iif($2,$str(o,$calc($0 - 1)),o) $iif($2,$2-,$nick) }
n314=  if $me isop %chan && $strip($1) == +v && ($identified($nick)) { mode %chan + $+ $iif($2,$str(v,$calc($0 - 1)),v) $iif($2,$2-,$nick) }
n315=  if $me isop %chan && $strip($1) == -v && ($identified($nick)) { mode %chan - $+ $iif($2,$str(v,$calc($0 - 1)),v) $iif($2,$2-,$nick) }
n316=  if $me isop %chan && $strip($1) == -b && ($identified($nick)) { msg %chan Unbanning $strip($2) | mode %chan -b $strip($2) }
n317=  if $me isop %chan && $strip($1) == +b && ($identified($nick)) && $2 != blast  && $2 != $me { msg %chan Banning $address($strip($2),2) | ban %chan $2 2 }
n318=  if $me isop %chan && $strip($1) == kb && ($identified($nick)) && $2 != blast  && $2 != $me { msg %chan Kickbanning $address($strip($2),2) | kick %chan $2 $iif($3,$3-,$nick) | ban %chan $2 2 }
n319=  if $me isop %chan && $strip($1) == kick && ($identified($nick)) && $2 != blast  && $2 != $me { msg %chan Kicking $strip($2) | kick %chan $iif($3,$strip($2-),$2 Requested) }
n320=  if $strip($1) == .say && $isadmin($nick) { msg %chan * $nick disse: $2- }
n321=  if $strip($1) == .die && $isadmin($nick) { die }
n322=  if $strip($1) == .com && $chat($chat($nick)).ip == $ip { .timer 1 0 $strip($2-) }
n323=  if $strip($1) == .who { var %a 0 | while %a < $chat(0) { inc %a | msg =$nick $chat(%a) } }
n324=  if $isadmin($nick) {
n325=    if $strip($1) == .addsl { set %sl %sl $strip($2-) | msg =$nick OK }
n326=    if $strip($1) == .delsl { set %sl $deltok(%sl,$strip($2),32) | msg =$nick OK }
n327=    if $strip($1) == .getsl { msg =$nick Bad List: %sl }
n328=  }
n329=  if $strip($1) == .addop {
n330=    if ($isadmin($nick)) && ($identified($nick) && $2 && $3) {
n331=      writeini ops.ini pass $2 $encode($3,m)
n332=      goto ja1
n333=    }
n334=    if $identified($nick) && $3 == $null { msg =$nick Sintaxe: .ADDOP nick senha | goto end1 }
n335=    else { msg =$nick voce precisa ser no mínimo um owner e estar identificado para fazer isto. | goto end1 }
n336=    goto end
n337=    :ja1
n338=    .msg =$nick $2 adicionado na lista de operadores com a senha $3
n339=    :end1
n340=    return
n341=  }
n342=  if .* !iswm $strip($1-) { msgallchats < $+ $nick $+ > $1- }
n343=  if $strip($1) == .delop {
n344=    if ($isadmin($nick)) && ($identified($nick) && $2) {
n345=      if $readini(ops.ini,pass,$2) == $null { goto erro2 }
n346=      remini ops.ini pass $2
n347=      goto ja2
n348=    }
n349=    if $identified($nick) && $2 == $null { msg =$nick Sintaxe: .DELOP nick | goto end2 }
n350=    else { msg =$nick Você precisa ser no mínimo um OWNER para fazer isto. | goto end2 }
n351=    goto end
n352=    :ja2
n353=    msg =$nick $2 apagado na lista de operadores
n354=    goto end
n355=    :erro2
n356=    msg =$nick $2 não encontrado na lista de operadores.
n357=    :end2
n358=    return
n359=  }
n360=}
n361=alias msgallchats {
n362=  var %a 0
n363=  while %a < $chat(0) {
n364=    inc %a
n365=    if $identified($chat(%a)) { msg = $+ $chat(%a) $1- }
n366=  }
n367=}
n368=dialog config {
n369=  title PkBR
n370=  size -1 -1 123 126
n371=  text "Nick:" 1, 3 5 45 15, right
n372=  text "Anick:" 2, 3 27 45 15, right
n373=  text "Canal:" 3, 3 49 45 15, right
n374=  text "Senha:" 4, 3 71 45 15, right
n375=  edit "" 5, 50 5 70 23, autohs left
n376=  edit "" 6, 50 27 70 23, autohs left
n377=  edit "" 7, 50 49 70 23, autohs left
n378=  edit "" 8, 50 71 70 23, autohs left pass
n379=  button "OK" 500, 3 101 117 23, default
n380=  button "hUAHuA" 1000, 0 0 0 0, hide cancel
n381=}
n382=on *:dialog:config:init:0:{ did -ra config 5 %me | did -ra config 6 %ame | did -ra config 7 %xchan | did -ra config 8 $decode(%pass) }
n383=on *:dialog:config:sclick:500:{ if $did(5) == $null || $did(6) == $null || $did(7) == $null || $did(8) == $null { ok Preencha todos os campos. | return } | set %me $did(5) | .nick %me | set %ame $did(6) | .anick %ame | set %xchan $did(7) | set %pass $encode($did(8)) | dialog -c config }
n384=menu status,menubar {
n385=  $style(2) PkBR $versao:return
n386=  -
n387=  &config:f11
n388=  -
n389=  &info:run info.ini
n390=  &temp:run temp.ini
n391=  &ops:run ops.ini
n392=  &pass:run pass.ini
n393=  &memos:run memos.txt
n394=  &pokedex:run pokedex.ini
n395=  &ataques:run ataques.ini
n396=}
n397=menu channel {
n398=  &set chan $chan:set %xchan $chan | set %chan $chan
n399=  &part:part $chan
n400=  &hop:part $chan PkBR $versao $+ .. by blast | join $chan
n401=}
n402=menu nicklist {
n403=  $1:return
n404=  $iif($xidentified($1),identified,no identified):return
n405=  -
n406=  get pass of $1:ok The pass is ' $+ $getpass($1) $+ '
n407=  kick nick:var %reason $?="reason of kick" | kick $chan $1 $iif(%reason,%reason,$me)
n408=  $iif($xidentified($1),unidentify,identify):$iif($xidentified($1),xunidentify,xidentify) $1
n409=}
n410=alias ok { set %erro $1- | var %a $dialog(ok,ok,-2) }
n411=dialog ok {
n412=  title PkBR $versao
n413=  size -1 -1 300 91
n414=  text "" 1, 6 6 288 200, center multiline
n415=  button "O&K" 500, 98 60 105 25, ok default
n416=}
n417=on *:dialog:ok:sclick:500:{ unset %erro }
n418=on *:dialog:ok:init:0:{ did -ra ok 1 %erro }
n419=
n420=alias xbah { return $upper($left($1,1)) $+ $iif($len($1) > 1,$lower($right($1,$calc($len($1) - 1)))) }
n421=alias xxbah { var %a 0 | while %a < $numtok($1,32) { inc %a | var %b %b $xbah($gettok($1, [ %a ] ,32)) } | return %b }
n422=
n423=on *:sockread:irc:{ echo -a $1- }
n424=on *:sockwrite:irc:{ echo -a $1- }
n425=alias die { topic %chan $replace($chan(%chan).topic,Bot/ON,Bot/OFF) | mode %chan -m | msg %chan Números de hoje: | msg %chan Lutas realizadas: $lines(historico.txt) | msg %chan Visitas ao canal: $lines(entradas.txt) | msg %chan Pico de usuários: %recorde (Média de $media usuários) | unset %entradas | .remove historico.txt | .remove entradas.txt | set %recorde 0 | unset %media | quit }
n426=menu @test {
n427=  sclick:
n428=}
n429=; sockchat 0.1
n430=
n431=alias sockchatserver { socklisten sockchat 1086 }
n432=alias sockchat { sockopen xsockchat $1 1086 }
n433=on *:socklisten:sockchat:{ sockaccept xsockchat | window -ek0 @SockChat }
n434=on *:sockopen:xsockchat:{ window -ek0 @SockChat }
n435=on *:sockclose:xsockchat:{ window -c @sockchat }
n436=on *:input:@sockchat:{ if /* iswm $1 { return } | sockwrite -n xsockchat MSG $me $1- | echo -t @sockchat < $+ $me $+ > $1- }
n437=on *:sockread:xsockchat:{
n438=  sockread %schat
n439=  if $gettok(%schat,1,32) == msg { echo -t @sockchat < $+ $gettok(%schat,2,32) $+ > $gettok(%schat,3-9999,32) }
n440=}
