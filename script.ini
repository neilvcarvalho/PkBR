[script]
n0=alias getinfo { return $readini(info.ini,$1,$replace($2,[,$chr(40),],$chr(41))) }
n1=alias setinfo { writeini info.ini $1 $sc($2) $3- }
n2=alias delinfo { remini info.ini $1 $2 }
n3=alias gettemp { return $readini(temp.ini,$1,$replace($2,[,$chr(40),],$chr(41))) }
n4=alias settemp { writeini temp.ini $1 $sc($2) $3- }
n5=alias deltemp { remini temp.ini $1 $2 }
n6=alias getpass { return $readini(pass.ini,pass,$replace($1,[,$chr(40),],$chr(41))) }
n7=alias setpass { writeini pass.ini pass $sc($1) $2- }
n8=alias delpass { remini pass.ini pass $1 }
n9=alias getdiv { return $readini(bank.ini,emprestimo,$replace($1,[,$chr(40),],$chr(41))) }
n10=alias setdiv { writeini bank.ini emprestimo $sc($1) $2- }
n11=alias deldiv { remini bank.ini emprestimo $1 }
n12=alias pokes return bulbasaur,ivysaur,charmander,charmeleon,squirtle,wartortle,caterpie,metapod,butterfree,weedle,kakuna,beedrill,pidgey,pidgeotto,rattata,raticate,spearow,fearow,ekans,arbok,pikachu,sandshrew,sandslash,nidoran(f),nidorina,nidoran(m),nidorino,clefairy,vulpix,jigglypuff,zubat,golbat,oddish,gloom,paras,parasect,venonat,digglet,meowth,psyduck,mankey,growlithe,poliwag,poliwhirl,abra,kadabra,machop,bellsprout,tentacool,geodude,graveler,ponyta,slowpoke,magnemite,doduo,seel,grimer,shellder,gastly,onix,drowzee,krabby,voltorb,exeggcute,cubone,hitmonlee,hitmonchan,lickitung,koffing,rhyhorn,chansey,tangela,horsea,goldeen,staryu,magikarp,gyarados,ditto,eevee,taurus,articuno,zapdos,moltres,dratini,farfetch'd,mr.mime,lapras,eevee,porygon,kabuto,omanyte,snorlax,aerodactyl,scyther,pinsir,tauros,electabuzz,magmar,jynx,kangaskhan,haunter,hypno
n13=alias pokes2 return chikorita,bayleef,cyndaquil,quilava,totodile,croconaw,hoothoot,noctowl,sentret,furret,pichu,ledyba,ledian,spinarak,ariados,cleffa,igglybuff,togepi,dunsparce,mareep,flaafy,wooper,quagsire,unown,hoppip,skiplum,pineco,yanma,sunkern,sudowoodo,wobbuffet,heracross,aipom,snubull,granbull,stantler,marill,azumarill,tyrogue,hitmontop,girafarig,miltank,magby,smoochum,elekid,smeargle,natu,xatu,qwilfish,shuckle,corsola,remoraid,octillery,chinchou,gligar,delibird,swinub,teddiursa,phanpy,donphan,mantine,skarmory,murkrow,houndour,houndoom,slugma,sneasel,misdreavus,raikou,entei,suicune,larvitar,lugia,ho-oh
n14=alias ehpoke { if $istok($pokes,$1,44) { return $true } | else return $false }
n15=alias check { if $gettemp(cadastrando,$1) == $true { deltemp cadastrando $1 | deltemp pokes $1 | msg $1 $pkbr Tempo esgotado } }
n16=alias nc {
n17=  msg $1 $cor(1) $+ ( $+ $cor(3) $+ $2 $+ $cor(1) $+ ) $cor(2) $+ $3-
n18=  if $2 == PkBR && *não*pode*usar* iswm $strip($3-) { msg %chan $cor(1) $+ %poke2 $cor(3) $+ usou POF! | .timer 1 3 xatacar PkBR pof! }
n19=  if $2 == PkBR && *golpe*desabilitado* iswm $strip($3-) { msg %chan $cor(1) $+ %poke2 $cor(3) $+ usou POF! | .timer 1 3 xatacar PkBR pof! }
n20=}
n21=alias isop { if $ini(ops.ini,pass,$nick) { return $true } | else return $false }
n22=alias identified {
n23=  if $readini(ops.ini,identify,$1) { return $true }
n24=  else { return $false }
n25=}
n26=alias unidentify remini ops.ini identify $1
n27=on *:connect:{ if $server == test.pkbr.org { set %chan #PkBR | oper admin 123 } | else set %chan %xchan | if $me != %me { nickserv ghost %me $decode(%pass) | nickserv release %me $decode(%pass) | nickserv recover %me $decode(%pass) | nick %me } | join %chan | .timer 1 20 join %chan $+ _Gym | xidentify PkBR | .timermedia 0 60 media }
n28=alias cc { return $replace($1,$chr(40),$chr(91),$chr(41),$chr(93)) }
n29=alias sc { return $replace($1,$chr(91),$chr(40),$chr(93),$chr(41)) }
n30=alias top50 {
n31=  .remove top50.txt
n32=  if $hget(top50) { hfree top50 }
n33=  checkrk
n34=  write top50.txt TOP 50 - PkBR $versao
n35=  write top50.txt Atualizado em $asctime
n36=  write top50.txt Pontuação mínima atual: %tp.pts pontos
n37=  write top50.txt  
n38=  if $hget(top50) == $null { hmake top50 100 }
n39=  var %a 0 | while %a < $ini(info.ini,pokes,0) { inc %a | if $pontos($ini(info.ini,pokes,%a)) < %tp.pts { goto pulo } | hadd top50 a $hget(top50,a) $pontos($ini(info.ini,pokes,%a)) $+ ~ $+ $cc($ini(info.ini,pokes,%a)) | :pulo }
n40=  var %b 0 | while %b < $numtok($hget(top50,a),32) { inc %b | var %txt $gettok($sorttok($hget(top50,a),32,nr), [ %b ] ,32) | var %nck $gettok( [ %txt ] ,2,126) | var %pnt $gettok( [ %txt ] ,1,126) | write top50.txt %b $+ ª posição: %nck - Com %pnt pontos. }
n41=}
n42=alias rnk1 { return a }
n43=on *:filesent:dados_*.txt:{ .remove $filename }
n44=alias pkgym return xpoke.gym. $+ $1
n45=on *:text:*:#:{
n46=  if $nick !isop $chan && @* iswm $strip($1) {
n47=    inc %p.tf.a. [ $+ [ $nick ] ]
n48=    if %p.tf.a. [ $+ [ $nick ] ] >= 3 && $strip($1) != @golpe { kick $chan $nick Floodou? Floodeu-se! | .timerp.tf. $+ $nick off | unset %p.*. [ $+ [ $nick ] ] | return }
n49=    if $timer(p.tf. $+ $nick) == $null { .timerp.tf. $+ $nick 1 5 unset %p.tf.a. [ $+ [ $nick ] ] }
n50=  }
n51=  if $nick !isop $chan && @* iswm $strip($1) {
n52=    if $strip($1) == %p.rf.a. [ $+ [ $nick ] ] && $strip($1) != @golpe { inc %p.rf.b. [ $+ [ $nick ] ] }
n53=    else unset %p.rf.b. [ $+ [ $nick ] ]
n54=    set %p.rf.a. [ $+ [ $nick ] ] $strip($1)
n55=    if $calc(%p.rf.b. [ $+ [ $nick ] ] + 1) >= 2 { kick $chan $nick Não repita os comandos. | .timerp.rf?. $+ $nick off | unset %p.*. [ $+ [ $nick ] ] | return }
n56=    if $timer(p.rf. $+ $nick) == $null { .timerp.rf. $+ $nick 1 5 unset %p.rf.b. [ $+ [ $nick ] ] | .timerp.rf2. $+ $nick 1 5 unset %p.rf.a. [ $+ [ $nick ] ] }
n57=  }
n58=  if $strip($1) == @gyms {
n59=    var %a 0 | while %a < $ini(gym.ini,gyms,0) { inc %a | var %l %l $cor(1) $+ $xxbah($ini(gym.ini,gyms, [ %a ] )) $+ : $cor(3) $+ $readini(gym.ini,gyms,$ini(gym.ini,gyms, [ %a ] )) $iif($readini(gym.ini,gyms,$ini(gym.ini,gyms, [ %a ] )) ison %chan $+ _Gym,(Disponível)) $iif(%a != $ini(gym.ini,gyms,0),$x) }
n60=    msg $nick $pkbr Lideres dos ginasios: %l
n61=  }
n62=  if $strip($1) == @gym {
n63=    if $jahadv($nick) { return }
n64=    if $timer(5 $+ $nick) { notice $nick Aguarde 5 minutos para lutar ou capturar novamente. (Faltam $duration($timer(5 $+ $nick).secs) $+ )  | settemp jahadv $nick x | return }
n65=    if $readini(gym.ini,gyms,$strip($2)) == $null { notice $nick Gym inexistente. | return }
n66=    if $readini(gym.ini,gyms,$strip($2)) !ison %chan $+ _Gym { notice $nick Líder não presente/disponível no momento. | return }
n67=    if $numtok($getinfo(insigneas,$nick),32) == $ini(gym.ini,gyms,$strip($2)) { notice $nick Você já tem a insígnea dada por $readini(gym.ini,gyms,$strip($2)) $+ . | return }
n68=    if $calc($numtok($getinfo(insigneas,$nick),32) +1) < $ini(gym.ini,gyms,$strip($2)) { notice $nick Você ainda não tem as insígneas necessárias para desafiar $readini(gym.ini,gyms,$strip($2)) $+ . | return }
n69=    if $numtok(%fight.fila,32) >= 20 { notice $nick A fila está cheia. | return }
n70=    if $istok(%fight.fila,gym. $+ $strip($2),32) { notice $nick O ginásio de $lower($strip($2)) já está na fila de lutas. | return }
n71=    if $istok(%fight.fila,$nick,32) { notice $nick Você já está na fila de lutas. | return }
n72=    if $strip($3) == $null { notice $nick Formato: @Gym tipo ID | return }
n73=    notice $nick $readini(gym.ini,gyms,$strip($2)) $+ : Não me faça rir, fracote! Você não ganha de mim! Só vai levar uma bela PISA!
n74=    set %fight.fila %fight.fila $nick Gym. $+ $xxbah($strip($2))
n75=    set % [ $+ [ $pkgym($strip($2)) ] ] $rand(1,$numtok($getinfo(pokes,gym. $+ $strip($2)),32))
n76=    set %xpoke. [ $+ [ $nick ] ] $strip($3)
n77=    fila
n78=    notice $readini(gym.ini,gyms,$strip($2)) ACORDA!!!!!!!! Você vai lutar agora pelo gym de $strip($2) com $nick
n79=    msg $readini(gym.ini,gyms,$strip($2)) ACORDA!!!!!!!! Você vai lutar agora pelo gym de $strip($2) com $nick
n80=    nc %chan $+ _Gym $readini(gym.ini,gyms,$strip($2)) ACORDA!!!!!!!! Você vai lutar agora pelo gym de $strip($2) com $nick
n81=    if %sbp.player1 == $null && $timer(luta) == $null {
n82=      iniciar luta
n83=    }
n84=  }
n85=  if $strip($1) == @top50 { dcc send $nick top50.txt }
n86=  if $strip($1) == @loteria {
n87=    if $getinfo(pokes,$nick) == $null { notice $nick Você não está cadastrado. | return }
n88=    if $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n89=    if $gettemp(lot,$nick) { notice $nick Você já fez uma aposta. | return }
n90=    if $getinfo(grana,$nick) < 100 { notice $nick Você não tem dinheiro suficiente para fazer sua fezinha... É preciso ter no mínimo $chr(36) $+ 100 | return }
n91=    if $strip($2) !isnum 0-10 || $strip($3) !isnum 0-10 || $strip($4) !isnum 0-10 { notice $nick Os três números apostados devem ser de 0 a 10. | return }
n92=    settemp lot $nick $strip($2-4)
n93=    setinfo grana $nick $calc($getinfo(grana,$nick) -100)
n94=    notice $nick Aposta realizada. O sorteio será realizado no $remove(%chan,$chr(35)) $+ .
n95=    if $ini(temp.ini,lot,0) >= 10 { lot.sort }
n96=  }
n97=  if $strip($1) == @sair {
n98=    if $strip($2) == luta {
n99=      if $istok(%fight.fila,$nick,32) == $false { notice $nick Você não está na fila de lutas. | return }
n100=      if $nick == %sbp.player1 || $nick == %sbp.player2 { notice $nick Você já está lutando. Para sair da luta, digite @desistir | return }
n101=      if $timer(luta) { if $gettok(%fight.fila,1,32) == $nick || $gettok(%fight.fila,2,32) == $nick { notice $nick Sua luta está sendo iniciada. Para sair da luta, digite @desistir | return } }
n102=      var %a 0 | while %a < $numtok(%fight.fila,32) {
n103=        inc %a
n104=        var %luta $gettok(%fight.fila, [ %a ] ,32) $gettok(%fight.fila,$calc( [ %a ] +1),32)
n105=        if $istok(%luta,$nick,32) { goto p }
n106=        var %lutas %lutas %luta
n107=        :p
n108=        inc %a
n109=      }
n110=      notice $nick Você saiu da fila de lutas.
n111=      set %fight.fila %lutas
n112=      fila
n113=    }
n114=    if $strip($2) == cap {
n115=      if $istok(%cap.fila,$nick,32) == $false { notice $nick Você não está na fila de capturas. | return }
n116=      if $nick == %sbp.player1 || $nick == %sbp.player2 { notice $nick Você já está capturando. Para sair da captura, digite @desistir | return }
n117=      if $timer(luta) { if $gettok(%cap.fila,1,32) == $nick { notice $nick Sua captura está sendo iniciada. Para sair dela, digite @desistir | return } }
n118=      set %cap.fila $deltok(%cap.fila,$findtok(%cap.fila,$nick,1,32))
n119=      notice $nick Você saiu da fila de capturas.
n120=      capfila
n121=    }
n122=  }
n123=  if $strip($1) == @desistir && $xidentified($nick) {
n124=    if $nick == %sbp.player1 { sbp.fim Player2 }
n125=    if $nick == %sbp.player2 { sbp.fim Player1 }
n126=  }
n127=  if $strip($1) == @evoluir && $strip($2) && $xidentified($nick) { xcheckevo $nick $strip($2) }
n128=  if $getinfo(pokes,$strip($2)) && $strip($1) == @pontos { msg %chan $pkbr $cor(3) $+ Pontuação de  $+ $cor(3) $+ $strip($2) $+  $x $cor(3) $+ $calc($replace($getinfo(levels,$strip($2)),$chr(32),+)) }
n129=  if $strip($1) == @dados {
n130=    var %nck $iif($strip($2),$strip($2),$nick)
n131=    var %nck $cc($ini(info.ini,pokes,$ini(info.ini,pokes,$sc(%nck))))
n132=    if $getinfo(pokes,%nck) {
n133=      var %a 0
n134=      var %b $gettok($getinfo(pokes, [ %nck  ]),0,32)
n135=      var %arq dados_ $+ $remove( [ %nck ] ,|,\,^) $+ .txt
n136=      .remove %arq
n137=      write %arq Nick: $cc($ini(info.ini,pokes,$ini(info.ini,pokes,$sc(%nck))))
n138=      write %arq $chr(160)
n139=      write %arq Pokémons:
n140=      while %a < %b {
n141=        inc %a
n142=        write %arq ID %a - $gettok($getinfo(pokes,%nck),%a,32) LVL $gettok($getinfo(levels,%nck),%a,32) - TM: $replace($xbah($gettok($getinfo(tms,%nck),%a,32)),No,Nenhum) / HM: $replace($xbah($gettok($getinfo(hms,%nck),%a,32)),No,Nenhum)
n143=      }
n144=      if $getinfo(itens,%nck) == Noitens || $getinfo(itens,%nck) == $null { goto ins }
n145=      write %arq $chr(160)
n146=      write %arq Itens: $comvirgula($getinfo(itens,%nck))
n147=      :ins
n148=      if $getinfo(insigneas,%nck) == $null { goto grana }
n149=      write %arq $chr(160)
n150=      write %arq Insigneas: $comvirgula($getinfo(insigneas,%nck))
n151=      :grana
n152=      var %a 0 | while %a < $ini(gym.ini,gyms,0) { inc %a | if $readini(gym.ini,gyms,$ini(gym.ini,gyms,%a)) == %nck { write %arq %nck é líder do ginásio do tipo $ini(gym.ini,gyms,%a) } }
n153=      write %arq $chr(160)
n154=      write %arq Grana: $getinfo(grana,%nck)
n155=      if $getdiv(%nck) > 0 { write %arq Empréstimo: $getdiv(%nck) }
n156=      write %arq Pontuação: $calc($replace($getinfo(levels,%nck),$chr(32),+)) ( $+ Média: $round($med(%nck),1) $+ )
n157=      write %arq Status: $iif($xidentified(%nck),Identificado,Não identificado)
n158=      write %arq $chr(160)
n159=      write %arq info by PkBR $versao
n160=      .dcc send $nick %arq
n161=    }
n162=  }
n163=  if $strip($1) == @tmlist { dcc send $nick tms.txt }
n164=  if $strip($1) == @info && %poke1 {
n165=    msg %chan $pkbr $cor(1) $+ Informações da luta atual
n166=    msg %chan $pkbr $cor(1) $+ Player 1: $cor(3) $+ %sbp.player1 $cor(2) $+ $x $cor(1) $+ Pokémon: $cor(3) $+ %poke1 $cor(1) $+ LVL $cor(3) $+ %poke1level
n167=    msg %chan $pkbr $cor(1) $+ Player 2: $cor(3) $+ %sbp.player2 $cor(2) $+ $x $cor(1) $+ Pokémon: $cor(3) $+ %poke2 $cor(1) $+ LVL $cor(3) $+ %poke2level
n168=  }
n169=  if $strip($1) == @emprestimo && $xidentified($nick) && $strip($2-) isnum {
n170=    var %velho $readini(bank.ini,emprestimo,$sc($nick))
n171=    var %total $calc( [ %velho ] + $strip($2-))
n172=    var %total $int( [ %total ] )
n173=    if %total > 1000 { notice $nick Bloqueado. A dívida não pode ultrapassar de $chr(36) $+ 1000, a não ser por causa dos juros. | return }
n174=    if %total !isnum { notice $nick Erro desconhecido, bloqueando. | write err.txt $asctime - $script / l $scriptline / com $nick | return }
n175=    notice $nick Sua dívida irá aumentando 2% a cada luta. Para pagar, digite @pagar quantia.
n176=    writeini bank.ini emprestimo $sc($nick) %total
n177=    setinfo grana $nick $calc($getinfo(grana,$nick) + $strip($2-))
n178=  }
n179=  if $strip($1) == @pagar && $xidentified($nick) && $strip($2-) isnum {
n180=    var %velho $readini(bank.ini,emprestimo,$sc($nick))
n181=    if $calc($getinfo(grana,$nick) - $strip($2-)) < 0 { notice $nick Você não pode pagar mais do que tem em mãos. | return }
n182=    var %total $calc( [ %velho ] - $strip($2-))
n183=    var %total $int( [ %total ] )
n184=    if %total < 0 { notice $nick Bloqueado. Pelo menos no PkBR Bank não existe dívida negativa :P | return }
n185=    if %total !isnum { notice $nick Erro desconhecido, bloqueando. | return }
n186=    setinfo grana $nick $calc($getinfo(grana,$nick) - $strip($2-))
n187=    notice $nick Sua dívida agora é %total
n188=    writeini bank.ini emprestimo $sc($nick) %total
n189=  }
n190=  if $strip($1) == @ajuda { dcc send $nick ajuda.txt }
n191=  if $strip($1) == @loja { dcc send $nick precos.txt }
n192=  if $strip($1) == @comprar {
n193=    if $getinfo(pokes,$nick) == $null { notice $nick Você não está cadastrado. | return }
n194=    if $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n195=    if $strip($2) == $null { notice $nick Formato: @Comprar Item | return }
n196=    if $getdiv($nick) > 1500 { notice $nick Bloqueado: Pare de comprar coisas e passe a pagar sua dívida. | return }
n197=    if $readini(mart.ini,mart,$strip($2)) == $null { notice $nick Item não encontrado. Digite @Loja para pegar a lista de itens disponíveis. | return }
n198=    if $getinfo(grana,$nick) < $readini(mart.ini,mart,$strip($2)) { notice $nick Dinheiro insuficiente. | return }
n199=    var %p $readini(mart.ini,mart,$strip($2))
n200=    var %i $strip($2)
n201=    if tm* iswm %i || hm* iswm %i { var %i $upper( [ %i ] ) }
n202=    else { var %i $xbah( [ %i ] ) }
n203=    if %i == $null { notice $nick Erro desconhecido. | write err.txt $asctime - $script / l $scriptline / com $nick | return }
n204=    setinfo grana $nick $calc($getinfo(grana,$nick) - %p)
n205=    if $getinfo(itens,$nick) == noitens { setinfo itens $nick %i }
n206=    else { setinfo itens $nick $getinfo(itens,$nick) %i }
n207=    notice $nick Item comprado. Agora você tem $chr(36) $+ $getinfo(grana,$nick) $+ .
n208=  }
n209=  if $strip($1) == @vender {
n210=    if $getinfo(pokes,$nick) == $null { notice $nick Você não está cadastrado. | return }
n211=    if $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n212=    if $strip($2) == $null { notice $nick Formato: @Vender Item | return }
n213=    if $istok($getinfo(itens,$nick),$strip($2),32) == $false { notice $nick Você não tem o item $strip($2) $+ . | return }
n214=    var %p $readini(mart.ini,mart,$strip($2))
n215=    var %p $calc( [ %p ] / 2)
n216=    setinfo grana $nick $calc($getinfo(grana,$nick) + %p)
n217=    var %itens $deltok($getinfo(itens,$nick),$findtok($getinfo(itens,$nick),$strip($2),1,32),32) | setinfo itens $nick $iif(%itens,%itens,noitens)
n218=    notice $nick Item comprado. Agora você tem $chr(36) $+ $getinfo(grana,$nick) $+ .
n219=  }
n220=  if $strip($1) == @descadastrar && $getinfo(pokes,$nick) { if $xidentified($nick) { delinfo pokes $nick | delinfo levels $nick | delinfo itens $nick | delinfo grana $nick | delpass $nick | deldiv $nick | xunidentify $nick | mode %chan -v $nick } }
n221=  if $strip($1) == @tmdex && $num($strip($2)) && $strip($2) isnum { var %a 0 | while %a < 50 { inc %a | var %txt $readini(tms.ini,tm-compat, [ %a ] ) | if $istok(%txt,$strip($2),32) { var %b %b %a } } | msg %chan $pkbr TMs que podem ser utilizados em $xbah($num($strip($2))) $+ : $comvirgula(%b) }
n222=  if $strip($1) == @hmdex && $num($strip($2)) && $strip($2) isnum { var %a 0 | while %a < 5 { inc %a | var %txt $readini(tms.ini,hm-compat, [ %a ] ) | if $istok(%txt,$strip($2),32) { var %b %b %a } } | msg %chan $pkbr HMs que podem ser utilizados em $xbah($num($strip($2))) $+ : $comvirgula(%b) }
n223=  if $strip($1) == @desafiar {
n224=    if $jahadv($nick) { return }
n225=    if $timer(5 $+ $nick) { notice $nick Aguarde 5 minutos para lutar ou capturar novamente. (Faltam $duration($timer(5 $+ $nick).secs) $+ ) | settemp jahadv $nick x | return }
n226=    if $istok(%cap.fila,$nick,32) { notice $nick Você está na fila de capturas. | return }
n227=    if $timer(5 $+ $strip($2)) { notice $nick $strip($2) deve aguardar 5 minutos para lutar ou capturar novamente. (Faltam $duration($timer(5 $+ $strip($2)).secs) $+ ) | return }
n228=    if $istok(%cap.fila,$strip($2),32) { notice $nick Você está na fila de capturas. | return }
n229=    if $numtok(%fight.fila,32) >= 20 { notice $nick Fila cheia. | return }
n230=    if $numtok($getinfo(pokes,$nick),32) < $strip($3) || $strip($2) <= 0 { notice $nick Você tem $numtok($getinfo(pokes,$nick),32) pokémons. | return }
n231=    if $strip($3) == $null { notice $nick Sintaxe: @Desafiar [Nick] [ID do seu pokémon] | return }
n232=    if $strip($2) == $nick { notice $nick Você não pode desafiar a si mesmo... | return }
n233=    if $strip($3) !isnum { notice $nick What? $strip($3) não é um número :P. | return }
n234=    if $getinfo(pokes,$nick) == $null { notice $nick Você não pode desafiar alguém sem ser cadastrado :P... | return }
n235=    if $strip($2) !ison %chan { notice $nick $strip($2) não está no $remove(%chan,$chr(35)) $+ . | return }
n236=    if $getinfo(pokes,$strip($2)) == $null { notice $nick $strip($2) não está cadastrado. | return }
n237=    if %desafio. [ $+ [ $strip($2) ] ] { notice $nick $strip($2) já está sendo desafiado. | return }
n238=    if $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n239=    if $xidentified($strip($2)) == $false { notice $nick $strip($2) não está identificado. | return }
n240=    if $istok(%fight.fila,$strip($2),32) { notice $nick $strip($2) já está na fila de lutas. | return }
n241=    if $istok(%fight.fila,$nick,32) { notice $nick Você já está incluído na fila. | return }
n242=    msg $strip($2) $nick está te desafiando para uma batalha pokémon. Ele usará $gettok($getinfo(pokes,$nick),$strip($3),32) LVL $gettok($getinfo(levels,$nick),$strip($3),32) $+ . Aceita? @Aceitar  $+ $nick $+  ID do seu pokémon (no PVT). Caso contrário, @Rejeitar  $+ $nick $+  <Motivo (opcional)>. Você tem 2 minutos para responder.
n243=    set %xpoke. [ $+ [ $nick ] ] $strip($3)
n244=    set %desafio. [ $+ [ $strip($2) ] ] $nick
n245=    .timer1 $+ $strip($2) 1 120 xdesafio $strip($2)
n246=  }
n247=  if $strip($1) == @capturar {
n248=    if $jahadv($nick) { return }
n249=    if $timer(5 $+ $nick) { notice $nick Aguarde 5 minutos para lutar ou capturar novamente. (Faltam $duration($timer(5 $+ $nick).secs) $+ )  | settemp jahadv $nick x | return }
n250=    if $istok(%fight.fila,$nick,32) { notice $nick Você está na fila de lutas. | return }
n251=    if $getinfo(pokes,$nick) == $null { notice $nick Você não está cadastrado. | return }
n252=    if $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n253=    if $istok(%cap.fila,$nick,32) { notice $nick Você já está na fila de capturas. | return }
n254=    if $findtok(%caps,$nick,0,32) >= 10 { notice $nick Você já atingiu o limite de tentativas de capturas diárias (10). | return }
n255=    if $strip($2) == $null { notice $nick Sintaxe: @capturar [ID do seu pokémon] | return }
n256=    if $strip($2) !isnum { notice $nick O ID do seu pokémon deve ser um número. | return }
n257=    if $numtok($getinfo(pokes,$nick),32) < $strip($2) || $strip($2) <= 0 { notice $nick Você tem $numtok($getinfo(pokes,$nick),32) pokémons. | return }
n258=    if *ball* !iswm $getinfo(itens,$nick) { notice $nick Voce não tem nenhum tipo de pokeball para poder capturar. | return }
n259=    if $numtok($getinfo(pokes,$nick),32) >= 70 { notice $nick Você tem muitos pokémons. | return }
n260=    notice $nick Você foi adicionado na fila de capturas.
n261=    set %cap.fila %cap.fila $nick
n262=    set %cap.poke. [ $+ [ $nick ] ] $strip($2)
n263=    set %caps %caps $nick
n264=    capfila
n265=    if %sbp.player1 == $null && $timer(luta) == $null {
n266=      iniciar captura
n267=    }
n268=  }
n269=  if $strip($1) == @treinar {
n270=    if $jahadv($nick) { return }
n271=    if $timer(5 $+ $nick) { notice $nick Aguarde 5 minutos para lutar ou capturar novamente. (Faltam $duration($timer(5 $+ $nick).secs) $+ )  | settemp jahadv $nick x | return }
n272=    if $istok(%cap.fila,$nick,32) { notice $nick Você está na fila de capturas. | return }
n273=    if $findtok(%fight.fila,pkbr,0,32) >= 5 { notice $nick 5 treinos já estão na fila, que é o limite. | return }
n274=    ;notice $nick Treinos bloqueados. Por enquanto fique apenas com lutas no estilo "humano vs humano", pelo comando @Desafiar [nick] [ID]. | return
n275=    if $numtok(%fight.fila,32) >= 20 { notice $nick Fila cheia. | return }
n276=    if $getinfo(pokes,$nick) == $null { notice $nick Você não está cadastrado. | return }
n277=    elseif $xidentified($nick) == $false { notice $nick Você não está identificado. | return }
n278=    elseif $istok(%fight.fila,$nick,32) { notice $nick Você já está na fila de lutas. | return }
n279=    elseif $strip($2) == $null { notice $nick Sintaxe: @treinar [ID do seu pokémon] | return }
n280=    elseif $strip($2) !isnum { notice $nick O ID do seu pokémon deve ser um número. | return }
n281=    elseif $numtok($getinfo(pokes,$nick),32) < $strip($2) { notice $nick Você tem $numtok($getinfo(pokes,$nick),32) pokémons. | return }
n282=    else { notice $nick Você foi adicionado na fila de lutas. }
n283=    set %fight.fila %fight.fila $nick PkBR
n284=    set %xpoke. [ $+ [ $nick ] ] $strip($2)
n285=    fila
n286=    if %sbp.player1 == $null && $timer(luta) == $null {
n287=      iniciar luta
n288=    }
n289=  }
n290=  if $strip($1) == @pokedex  {
n291=    dcc send $nick pokedex.txt
n292=  }
n293=  if $strip($1) == @fila {
n294=    fila
n295=  }
n296=  if $strip($1) == @capfila { capfila }
n297=  if $strip($1) == @lancar && $strip($2) && %sbp.player [ $+ [ %sbp.vez ] ] == $nick && %modo == cap {
n298=    msg %chan $pkbr $cor(3) $+ O comando agora é $cor(1) $+ @usar
n299=  }
n300=  if $strip($1) == @usar {
n301=    if $getinfo(pokes,$nick) == $null { notice $nick Voce não está cadastrado. | return }
n302=    if $xidentified($nick) == $false { notice $nick Voce não está identificado. | return }
n303=    if $istok($getinfo(itens,$nick),$strip($2),32) == $false { notice $nick Voce não tem $strip($2) | return }
n304=    if hm* iswm $strip($2) || tm* iswm $strip($2) || *stone iswm $strip($2) || $strip($2) == rarecandy { goto p }
n305=    if %sbp.player [ $+ [ %sbp.vez ] ] != $nick { nc %chan $nick Não é sua vez. | return }
n306=    if $nick == %sbp.player1 { var %p 1 }
n307=    if $nick == %sbp.player2 { var %p 2 }
n308=    :p
n309=    if %sbp.vez == %p {
n310=      if $strip($2-) == potion { item $+ %p potion | var %usou x }
n311=      if $strip($2-) == superpotion { item $+ %p superpotion | var %usou x }
n312=      if $strip($2-) == hyperpotion { item $+ %p hyperpotion | var %usou x }
n313=      if $strip($2-) == maxpotion { item $+ %p maxpotion | var %usou x }
n314=      if $strip($2-) == antidote { item $+ %p antidote | var %usou x }
n315=    }
n316=    if $strip($2) == rarecandy {
n317=      if $nick == %sbp.player1 || $nick == %sbp.player2 { notice $nick Não é permitido o uso de RareCandy em luta. | return }
n318=      if $strip($3-) !isnum && $strip($3-) < $gettok($getinfo(levels,$nick),$strip($3-),32) { notice $nick ID inválido. | return }
n319=      if $gettok($getinfo(levels,$nick),$strip($3-),32) == 100 { notice $nick Voce não pode usar rarecandy neste pokemon, ele já está no level máximo. | return }
n320=      var %lvl $gettok($getinfo(levels,$nick),$strip($3-),32)
n321=      setinfo levels $nick $puttok($getinfo(levels,$nick),$calc(%lvl + 1),$strip($3-),32)
n322=      notice $nick O level de $gettok($getinfo(pokes,$nick),$strip($3-),32) agora é $calc(%lvl + 1)
n323=      var %usou x
n324=    }
n325=    if *stone iswm $strip($2) && $strip($3) isnum {
n326=      var %pkm $gettok($getinfo(pokes,$nick),$strip($3),32)
n327=      if %pkm == $null { return }
n328=      if %pkm == eevee {
n329=        if $strip($2) == thunderstone { var %evol Jolteon }
n330=        if $strip($2) == firestone { var %evol Flareon }
n331=        if $strip($2) == waterstone { var %evol Vaporeon }
n332=        if %evol == $null { notice $nick Eevee não aceita outra stone além de thunder, fire ou waterstone. | return }
n333=        setinfo pokes $nick $puttok($getinfo(pokes,$nick),%evol,$strip($3),32)
n334=        msg %chan $pkbr O $xbah(%pkm) de $nick evoluiu!
n335=        var %usou x
n336=        goto p.evo
n337=      }
n338=      if $evo(%pkm) == $strip($2) { setinfo pokes $nick $puttok($getinfo(pokes,$nick),$xbah($num($calc($num(%pkm) + 1))),$strip($3-),32) | msg %chan $pkbr O $xbah(%pkm) de $nick evoluiu! | var %usou x }
n339=      else notice $nick $xbah(%pkm) não aceita $strip($2)
n340=      :p.evo
n341=    }
n342=    if tm* iswm $strip($2) && $strip($3) isnum {
n343=      var %tm $remove($strip($2),tm)
n344=      if %tm !isnum { notice $nick TM inválido | return }
n345=      var %pkm $gettok($getinfo(pokes,$nick),$strip($3),32)
n346=      if %pkm isnum || %pkm == $null { return }
n347=      if $istok($readini(tms.ini,tm-compat,%tm),$num(%pkm),32) { setinfo tms $nick $puttok($getinfo(tms,$nick),%tm,$strip($3-),32) | notice $nick Seu pokemon agora tem um novo golpe. }
n348=      else notice $nick $xbah(%pkm) não aceita $strip($2)
n349=    }
n350=    if hm* iswm $strip($2) && $strip($3) isnum {
n351=      var %hm $remove($strip($2),hm)
n352=      if %hm !isnum { notice $nick HM inválido | return }
n353=      var %pkm $gettok($getinfo(pokes,$nick),$strip($3),32)
n354=      if %pkm isnum || %pkm == $null { return }
n355=      if $istok($readini(hms.ini,hm-compat,%hm),$num(%pkm),32) { setinfo hms $nick $puttok($getinfo(hms,$nick),%hm,$strip($3-),32) | notice $nick Seu pokemon agora tem um novo golpe. }
n356=      else notice $nick $xbah(%pkm) não aceita $strip($2)
n357=    }
n358=    if *ball iswm $strip($2) && %modo == cap {
n359=      sbp.cap $nick $strip($2)
n360=      if %poke1 == $null { var %usou x }
n361=    }
n362=    if %usou != $null { var %itens $deltok($getinfo(itens,$nick),$findtok($getinfo(itens,$nick),$strip($2),1,32),32) | setinfo itens $nick $iif(%itens,%itens,noitens) }
n363=  }
n364=  if $isadmin($nick) {
n365=    if $strip($1) == !loteria {
n366=      if $strip($2) == -f { var %a $calc(10 - $ini(temp.ini,lot,0)) | msg %chan $pkbr $cor(3) $+ Falta $+ $iif(%a > 1,m) $cor(1) $+ %a $cor(3) $+ aposta $+ $iif(%a > 1,s) $+ . }
n367=      if $strip($2) == -n { echo -s lalalalala | var %b 0 | while %b < $ini(temp.ini,lot,0) { inc %b | var %n $ini(temp.ini,lot, [ %b ] ) | var %nicks %nicks $cc(%n) } | msg %chan $pkbr $cor(1) $+ Nicks apostadores: $cor(3) $+ $reptok($replace($comvirgula(%nicks),$chr(44),$cor(1) $+ $chr(44) $+ $cor(3)),e,$cor(1) $+ e $+ $cor(3),1,32) }
n368=      if $strip($2) == -p { msg %chan $pkbr $cor(1) $+ Prêmio atual: $cor(3) $+ %lot.premio }
n369=    }
n370=    if $strip($1) == !luta { sbp.inicio $strip($2-) }
n371=    if $strip($1) == !pular { poke $+ %sbp.vez $+ passar }
n372=    if $strip($1) == !vencedor && $2 { sbp.fim $strip($2) }
n373=    if $strip($1) == !naolutar && $2 {
n374=      if $istok(%fight.fila,$2,32) == $false { notice $nick $2 não está na fila | return }
n375=      var %a 0 | while %a < $numtok(%fight.fila,32) {
n376=        inc %a
n377=        var %luta $gettok(%fight.fila, [ %a ] ,32) $gettok(%fight.fila,$calc( [ %a ] +1),32)
n378=        if $istok(%luta,$strip($2),32) { goto p }
n379=        var %lutas %lutas %luta
n380=        :p
n381=        inc %a
n382=      }
n383=      notice $nick $2 removido da fila de lutas.
n384=      set %fight.fila %lutas
n385=      fila
n386=    }
n387=    if $strip($1) == !naocapturar && $2 { notice $nick $gettok(%cap.fila,$findtok(%cap.fila,$2,1,32),32) removido da fila de capturas. | set %cap.fila $deltok(%cap.fila,$findtok(%cap.fila,$2,1,32),32) }
n388=    if $strip($1) == !tm1 && $2 { set %tm1 %tm1 $strip($2) }
n389=    if $strip($1) == !tm2 && $2 { set %tm2 %tm2 $strip($2) }
n390=    if $strip($1) == !zerar { zerartudo }
n391=    if $strip($1) == !trocar {
n392=      var %pk1 $gettok($getinfo(pokes,$2),$3,32)
n393=      var %lv1 $gettok($getinfo(levels,$2),$3,32)
n394=      var %tm1 $gettok($getinfo(tms,$2),$3,32)
n395=      var %hm1 $gettok($getinfo(hms,$2),$3,32)
n396=      var %pk2 $gettok($getinfo(pokes,$4),$5,32)
n397=      var %lv2 $gettok($getinfo(levels,$4),$5,32)
n398=      var %tm2 $gettok($getinfo(tms,$4),$5,32)
n399=      var %hm2 $gettok($getinfo(hms,$4),$5,32)
n400=      if $evo(%pk1) == troca { var %pk1 $replace($xbah($ini(pokedex.ini,golpes,$calc($num(%pk1) + 1))),mime,Mime) }
n401=      if $evo(%pk2) == troca { var %pk2 $replace($xbah($ini(pokedex.ini,golpes,$calc($num(%pk2) + 1))),mime,Mime) }
n402=      setinfo pokes $2 $puttok($getinfo(pokes,$2),%pk2,$3,32)
n403=      setinfo pokes $4 $puttok($getinfo(pokes,$4),%pk1,$5,32)
n404=      setinfo levels $2 $puttok($getinfo(levels,$2),%lv2,$3,32)
n405=      setinfo levels $4 $puttok($getinfo(levels,$4),%lv1,$5,32)
n406=      setinfo tms $2 $puttok($getinfo(tms,$2),%tm2,$3,32)
n407=      setinfo tms $4 $puttok($getinfo(tms,$4),%tm1,$5,32)
n408=      setinfo hms $2 $puttok($getinfo(hms,$2),%hm2,$3,32)
n409=      setinfo hms $4 $puttok($getinfo(hms,$4),%hm1,$5,32)
n410=      notice $nick Trocado!
n411=    }
n412=    if $strip($1) == !vender {
n413=      ; !vender nick id nick2 preco
n414=      var %pkm $gettok($getinfo(pokes,$2),$3,32)
n415=      var %lvl $gettok($getinfo(levels,$2),$3,32)
n416=      var %tm $gettok($getinfo(tms,$2),$3,32)
n417=      var %hm $gettok($getinfo(hms,$2),$3,32)
n418=      var %grn1 $getinfo(grana,$2)
n419=      var %grn2 $getinfo(grana,$4)
n420=      if $istok(%fight.fila,$2,32) { notice $nick Bloqueado: $strip($2) está na fila de lutas. | return }
n421=      if $istok(%cap.fila,$2,32) { notice $nick Bloqueado: $strip($2) está na fila de capturas. | return }
n422=      if $calc(%grn2 - $5) < 0 { return }
n423=      setinfo pokes $2 $deltok($getinfo(pokes,$2),$3,32)
n424=      setinfo levels $2 $deltok($getinfo(levels,$2),$3,32)
n425=      setinfo tms $2 $deltok($getinfo(tms,$2),$3,32)
n426=      setinfo hms $2 $deltok($getinfo(hms,$2),$3,32)
n427=      setinfo pokes $4 $getinfo(pokes,$4) %pkm
n428=      setinfo levels $4 $getinfo(levels,$4) %lvl
n429=      setinfo tms $4 $getinfo(tms,$4) %tm
n430=      setinfo hms $4 $getinfo(hms,$4) %hm
n431=      setinfo grana $4 $calc(%grn2 - $5)
n432=      setinfo grana $2 $calc(%grn1 + $5)
n433=      notice $nick Vendido!
n434=    }
n435=    if $strip($1) == !favorecer && $2 {
n436=      if $2 == 1 { set %poke1ata $calc(%poke1ata + 2) }
n437=      if $2 == 2 { set %poke2ata $calc(%poke2ata + 2) }
n438=      msg %chan %sbp.player [ $+ [ $2 ] ] favorecido.
n439=    }
n440=    if $strip($1) == !iniciar {
n441=      iniciar $strip($2)
n442=    }
n443=  }
n444=  if $strip($1) == @golpe {
n445=    xatacar $nick $strip($2-)
n446=  }
n447=}
n448=on *:invite:%chan:{ if $isadmin($nick) { join %chan } }
n449=alias iniciar {
n450=  if $1 == luta {
n451=    var %nick1 $gettok(%fight.fila,1,32)
n452=    var %poke1 %xpoke. [ $+ [ %nick1 ] ]
n453=    var %level1 $gettok($getinfo(levels, [ %nick1 ] ), [ %poke1 ] ,32)
n454=    var %num1 $ini(pokedex.ini,golpes,$gettok($getinfo(pokes, [ %nick1 ] ), [ %poke1 ] ,32))
n455=    var %nick2 $gettok(%fight.fila,2,32)
n456=    if %nick2 != PkBR {
n457=      var %poke2 %xpoke. [ $+ [ %nick2 ] ]
n458=      var %level2 $gettok($getinfo(levels, [ %nick2 ] ), [ %poke2 ] ,32)
n459=      var %num2 $ini(pokedex.ini,golpes,$gettok($getinfo(pokes, [ %nick2 ] ), [ %poke2 ] ,32))
n460=      set %modo fight
n461=    }
n462=    else {
n463=      if %level1 <= 36 { var %level2 $rand(25,35) }
n464=      if %level1 > 36 && %level1 < 46 { var %level2 $rand(36,45) }
n465=      if %level1 >= 46 && %level1 < 56 { var %level2 $rand(46,55) }
n466=      if %level1 >= 56 && %level1 < 66 { var %level2 $rand(56,65) }
n467=      if %level1 >= 66 && %level1 < 76 { var %level2 $rand(66,75) }
n468=      if %level1 >= 76 && %level1 < 86 { var %level2 $rand(76,85) }
n469=      if %level1 >= 86 && %level1 < 96 { var %level2 $rand(86,95) }
n470=      if %level1 >= 96 { var %level2 $rand(96,100) }
n471=      var %num2 $rand(1,149)
n472=    }
n473=    if $gettok($getinfo(tms,%nick1),%poke1,32) isnum { set %tm1 $readini(tms.ini,tms,$gettok($getinfo(tms,%nick1),%poke1,32)) }
n474=    if $gettok($getinfo(tms,%nick2),%poke2,32) isnum { set %tm2 $readini(tms.ini,tms,$gettok($getinfo(tms,%nick2),%poke2,32)) }
n475=    if $gettok($getinfo(hms,%nick1),%poke1,32) isnum { set %hm1 $readini(tms.ini,hms,$gettok($getinfo(hms,%nick1),%poke1,32)) }
n476=    if $gettok($getinfo(hms,%nick2),%poke2,32) isnum { set %hm2 $readini(tms.ini,hms,$gettok($getinfo(hms,%nick2),%poke2,32)) }
n477=    msg %chan $pkbr Iniciando luta em 10 segundos... | .timerluta 1 10 sbp.inicio %nick1 %num1 %level1 %nick2 %num2 %level2
n478=  }
n479=  if $1 == captura {
n480=    var %nick1 $gettok(%cap.fila,1,32)
n481=    var %poke1 %cap.poke. [ $+ [ %nick1 ] ]
n482=    var %level1 $gettok($getinfo(levels, [ %nick1 ] ), [ %poke1 ] ,32)
n483=    var %num1 $ini(pokedex.ini,golpes,$gettok($getinfo(pokes, [ %nick1 ] ), [ %poke1 ] ,32))
n484=    var %med $med( [ %nick1 ] )
n485=    var %med $int( [ %med ] )
n486=    if %med <= 45 { var %level2 25 }
n487=echo -s %med
n488=    if %med >= 46 && %med <= 55 { var %level2 $rand(26,35) }
n489=    if %med >= 56 && %med <= 65 { var %level2 $rand(36,45) }
n490=    if %med >= 66 && %med <= 75 { var %level2 $rand(46,55) }
n491=    if %med >= 76 && %med <= 85 { var %level2 $rand(56,65) }
n492=    if %med >= 86 && %med <= 95 { var %level2 $rand(66,75) }
n493=    if %med >= 96 { var %level2 $rand(76,80) }
n494=    set %modo cap
n495=    if $gettok($getinfo(tms,%nick1),%poke1,32) isnum { set %tm1 $readini(tms.ini,tms,$gettok($getinfo(tms,%nick1),%poke1,32)) }
n496=    if $gettok($getinfo(tms,%nick2),%poke2,32) isnum { set %tm2 $readini(tms.ini,tms,$gettok($getinfo(tms,%nick2),%poke2,32)) }
n497=    if $gettok($getinfo(hms,%nick1),%poke1,32) isnum { set %tm1 $readini(tms.ini,hms,$gettok($getinfo(hms,%nick1),%poke1,32)) }
n498=    if $gettok($getinfo(hms,%nick2),%poke2,32) isnum { set %tm2 $readini(tms.ini,hms,$gettok($getinfo(hms,%nick2),%poke2,32)) }
n499=    msg %chan $pkbr Iniciando captura em 10 segundos... | .timerluta 1 10 sbp.inicio %nick1 %num1 %level1 PkBR $rand(1,149) %level2
n500=  }
n501=}
n502=alias media { if $isid { return $calc($calc($replace(%media,$chr(32),+)) / $numtok(%media,32)) } | else { set %media %media $nick(%chan,0) | set %media $calc($calc($replace(%media,$chr(32),+)) / $numtok(%media,32)) } }
n503=alias semacento {
n504=  return $replace($1-,á,a,à,a,ä,a,â,a,ã,a,é,e,ë,e,è,e,ê,e,í,i,î,i,ï,i,ì,i,ó,o,ò,o,ö,o,ô,o,õ,o,ú,u,ù,u,ü,u,û,u)
n505=}
